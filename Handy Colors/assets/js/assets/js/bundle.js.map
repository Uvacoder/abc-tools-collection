{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/full-palette.ts","src/js/index.ts","src/js/nav.ts","src/js/palette-constructor.ts","src/js/palettes.ts","src/js/tabs.ts","src/js/tray.ts"],"names":[],"mappings":"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","file":"../../bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import { IFullPaletteParams } from './interfaces';\n\nenum CLASSNAME {\n  COLOR = 'full-palette-color',\n  COLOR_SELECTED = 'full-palette-color--selected',\n  COLOR_CURRENT = 'full-palette-color--current',\n  VIEW = 'full-palette-color__view',\n  VIEW_SELECTED = 'full-palette-color__view--selected',\n  CONTROLS = 'view-controls',\n  CONTROL = 'view-controls__control',\n  CONTROL_CURRENT = 'view-controls__control--current',\n  COLORS = 'full-palette__colors',\n  COLORS_TILES = 'full-palette__colors--tiles'\n}\n\nexport default class FullPalette {\n  _element: HTMLElement;\n  _colorClickHandler: (color: string) => void;\n  _currentColorElement: HTMLElement;\n  _viewControlsElement: HTMLElement;\n  _currentViewControl: HTMLElement;\n  _colorsElement: HTMLElement;\n\n  constructor ({ element, colorClickHandler }: IFullPaletteParams) {\n    this._element = element;\n    this._colorClickHandler = colorClickHandler;\n    this._colorsElement = this._element.querySelector(`.${CLASSNAME.COLORS}`);\n    this._viewControlsElement = this._element.querySelector(`.${CLASSNAME.CONTROLS}`);\n    this._currentViewControl = this._viewControlsElement.querySelector(`.${CLASSNAME.CONTROL_CURRENT}`);\n\n    this._element.addEventListener('click', (event) => {\n      const colorControl: HTMLButtonElement = (<HTMLElement>event.target).closest(`.${CLASSNAME.COLOR}`);\n\n      if (!colorControl) {\n        return;\n      }\n\n      this._colorClickHandler(colorControl.value);\n    });\n\n    this._viewControlsElement.addEventListener('click', (event) => {\n      const viewControl: HTMLButtonElement = (<HTMLElement>event.target).closest(`.${CLASSNAME.CONTROL}`);\n\n      if (!viewControl) {\n        return;\n      }\n\n      this._currentViewControl.classList.remove(CLASSNAME.CONTROL_CURRENT);\n      if (viewControl.value === 'tiles') {\n        this._colorsElement.classList.add(CLASSNAME.COLORS_TILES);\n      } else {\n        this._colorsElement.classList.remove(CLASSNAME.COLORS_TILES);\n      }\n\n      this._currentViewControl = viewControl;\n      this._currentViewControl.classList.add(CLASSNAME.CONTROL_CURRENT);\n    });\n  }\n\n  selectColor (color: string): void {\n    const colorControl = this._element.querySelector(`#color-${color}`);\n    colorControl.classList.add(CLASSNAME.COLOR_SELECTED);\n  }\n\n  unselectColor (color: string): void {\n    const colorControl = this._element.querySelector(`#color-${color}`);\n    colorControl.classList.remove(CLASSNAME.COLOR_SELECTED);\n    this._currentColorElement.classList.remove(CLASSNAME.COLOR_CURRENT);\n  }\n\n  setCurrentColor (color: string): void {\n    if (this._currentColorElement) {\n      this._currentColorElement.classList.remove(CLASSNAME.COLOR_CURRENT);\n    }\n\n    if (!color) {\n      return;\n    }\n\n    this._currentColorElement = this._element.querySelector(`#color-${color}`);\n    this._currentColorElement.classList.add(CLASSNAME.COLOR_CURRENT);\n  }\n}\n","import Nav from './nav';\nimport Tabs from './tabs';\nimport { addPalettesActions } from './palettes';\nimport { initPaletteConstructor } from './palette-constructor';\n\ndocument.body.classList.remove('no-js');\n\nconst navElement: HTMLElement = document.querySelector('.nav');\nconst mainElement: HTMLElement = document.querySelector('.main');\nconst palettesElement: HTMLElement = document.querySelector('.palettes');\nconst fullPaletteElement: HTMLElement = document.querySelector('.full-palette');\nconst createPaletteElement: HTMLElement = document.querySelector('.tray');\n\nconst currentSectionId = document.location.hash\n  ? document.location.hash.substr(1)\n  : 'full-palette';\n\nconst tabs = new Tabs({ element: mainElement });\nconst nav = new Nav({\n  element: navElement,\n  setCurrentTab: tabs.setCurrent\n});\n\ninitPaletteConstructor({\n  fullPaletteElement,\n  createPaletteElement\n});\n\naddPalettesActions({ element: palettesElement });\n\nnav.setCurrent(currentSectionId);\ntabs.setCurrent(currentSectionId);\n","import { INav } from './interfaces';\n\nenum CLASSNAME {\n  ITEM = 'nav__item',\n  CURRENT = 'nav__item--current'\n}\n\nexport default class Nav {\n  _element: HTMLElement;\n  _current: HTMLElement;\n  _items: Record<string, HTMLElement>\n  _setCurrentTab: (id: string) => void;\n\n  constructor ({ element, setCurrentTab }: INav) {\n    this._element = element;\n    this._items = this._getItems();\n    this._current = null;\n    this._setCurrentTab = setCurrentTab;\n\n    this.setCurrent = this.setCurrent.bind(this);\n\n    this._addEvents();\n  }\n\n  _addEvents (): void {\n    this._element.addEventListener('click', (event) => {\n      event.preventDefault();\n      const dataset = (<HTMLElement>event.target).dataset;\n\n      if (!dataset || !dataset.target) {\n        return;\n      }\n\n      this.setCurrent(dataset.target);\n      this._setCurrentTab(dataset.target);\n    });\n  }\n\n  setCurrent (id: string): void {\n    if (this._current) {\n      this._current.classList.remove(CLASSNAME.CURRENT);\n    }\n\n    this._current = <HTMLElement>(this._items[id]);\n    this._current.classList.add(CLASSNAME.CURRENT);\n\n    history.pushState(null, null, `#${id}`);\n  }\n\n  _getItems (): Record<string, HTMLElement> {\n    const items = Array.from(this._element.querySelectorAll(`.${CLASSNAME.ITEM}`));\n\n    return items.reduce((prev: Record<string, HTMLElement>, item: HTMLElement) => {\n      const dataset = item.dataset;\n\n      if (!dataset || !dataset.target) {\n        return prev;\n      }\n\n      const target = dataset.target;\n\n      prev[target] = item;\n\n      return prev;\n    }, {});\n  }\n}\n","import { IPaletteContructor, IFullPalette, ITray } from './interfaces';\nimport FullPalette from './full-palette';\nimport Tray from './tray';\n\nconst MAX_COLORS = 5;\n\nexport const initPaletteConstructor = ({ fullPaletteElement, createPaletteElement }: IPaletteContructor):void => {\n  const tray: ITray = new Tray({\n    element: createPaletteElement,\n    removeColor,\n    setPosition\n  });\n\n  const fullPalette: IFullPalette = new FullPalette({\n    element: fullPaletteElement,\n    colorClickHandler: toggleColor\n  });\n\n  const colors: Array<string> = [];\n  let currentPosition = 0;\n\n  // If no clicks on colors => position not changed manually\n  // If all colors was cleared & pos is 0\n  let isSequential = true;\n\n  function toggleColor (color: string): void {\n    const currentPosColor = getCurrentColor();\n\n    if (currentPosColor === color) {\n      removeColor(currentPosition);\n      tray.removeColorFromTray(currentPosition);\n      return;\n    }\n\n    addColor(color);\n\n    setNextCell();\n\n    fullPalette.setCurrentColor(getCurrentColor());\n  }\n\n  function setNextCell (): void {\n    if (isSequential) {\n      if (currentPosition < MAX_COLORS - 1) {\n        currentPosition++;\n        tray.setCurrent(currentPosition);\n      } else {\n        isSequential = false;\n      }\n    }\n  }\n\n  function setPosition (position: number): void {\n    if (typeof position !== 'number') {\n      return;\n    }\n\n    currentPosition = position;\n    fullPalette.setCurrentColor(getCurrentColor());\n\n    const existedColors = getExistedColors();\n\n    if (existedColors.length === 0 && currentPosition === 0) {\n      isSequential = true;\n    } else {\n      isSequential = false;\n    }\n  }\n\n  function addColor (color: string): void {\n    const currentColorOnPos = getCurrentColor();\n    colors[currentPosition] = color;\n\n    const isNeedUnselectColorOnPos = currentColorOnPos\n      && currentColorOnPos !== color\n      && !colors.includes(currentColorOnPos);\n\n    if (isNeedUnselectColorOnPos) {\n      // Override existed color & unselect it\n      fullPalette.unselectColor(currentColorOnPos);\n    }\n\n    tray.addColorToTray({\n      color,\n      position: currentPosition\n    });\n    fullPalette.selectColor(color);\n\n    tray.setTrayOutput(getExistedColors());\n  }\n\n  function removeColor (position: number): void {\n    const color = colors[position];\n    colors[position] = '';\n\n    if (!colors.includes(color)) {\n      fullPalette.unselectColor(color);\n    }\n\n    const existedColors = getExistedColors();\n    if (existedColors.length === 0) {\n      isSequential = true;\n    }\n\n    tray.setTrayOutput(existedColors);\n    fullPalette.setCurrentColor(getCurrentColor());\n  }\n\n  function getExistedColors (): Array<string> {\n    return colors.filter(item => item);\n  }\n\n  function getCurrentColor (): string {\n    return colors[currentPosition];\n  }\n};\n","import { IPalettes } from './interfaces';\n\nenum CLASSNAME {\n  ITEM = 'tiny-palette',\n  CURRENT = 'tiny-palette--current'\n}\n\nexport const addPalettesActions = ({ element }: IPalettes): void => {\n  let current: HTMLElement = null;\n\n  element.addEventListener('click', (event) => {\n    const palette = (<HTMLElement>event.target).closest(`.${CLASSNAME.ITEM}`);\n\n    if (!palette || palette.classList.contains(CLASSNAME.CURRENT)) {\n      return;\n    }\n\n    if (current) {\n      current.classList.remove(CLASSNAME.CURRENT);\n    }\n\n    current = <HTMLElement>palette;\n    current.classList.add(CLASSNAME.CURRENT);\n  });\n};\n","import { ITabs } from './interfaces';\n\nenum CLASSNAME {\n  ITEM = 'section',\n  CURRENT = 'section--current'\n}\n\nexport default class Tabs {\n  _element: HTMLElement;\n  _items: Record<string, HTMLElement>;\n  _current: HTMLElement;\n\n  constructor ({ element }: ITabs) {\n    this._element = element;\n    this._items = this._getItems();\n    this._current = null;\n\n    this.setCurrent = this.setCurrent.bind(this);\n  }\n\n  _getItems (): Record<string, HTMLElement> {\n    const items = Array.from(this._element.querySelectorAll(`.${CLASSNAME.ITEM}[id]`));\n\n    return items.reduce((prev: Record<string, HTMLElement>, item: HTMLElement) => {\n      prev[item.id] = item;\n\n      return prev;\n    }, {});\n  }\n\n  setCurrent (id: string):void {\n    if (!this._items[id]) {\n      return;\n    }\n\n    if (this._current) {\n      this._current.classList.remove(CLASSNAME.CURRENT);\n    }\n\n    this._current = this._items[id];\n    this._current.classList.add(CLASSNAME.CURRENT);\n  }\n}\n","import { ITrayParams, ISetColor } from './interfaces';\n\nenum CLASSNAMES {\n  ITEM = 'tray__color',\n  CURRENT = 'tray__color--current',\n  FILLED = 'tray__color--filled',\n  OUTPUT = 'tray__output'\n}\n\nexport default class Tray {\n  _element: HTMLElement;\n  _currentElement: HTMLElement;\n  _outputElement: HTMLTextAreaElement;\n  _items: NodeListOf<HTMLElement>;\n  _colorClickHandler: (color: string) => void;\n  _setPosition: (position: number) => void;\n  _removeColor: (position: number) => void;\n\n  constructor ({ element, setPosition, removeColor }: ITrayParams) {\n    this._element = element;\n    this._setPosition = setPosition;\n    this._removeColor = removeColor;\n    this._currentElement = null;\n    this._items = this._element.querySelectorAll(`.${CLASSNAMES.ITEM}`);\n    this._outputElement = this._element.querySelector(`.${CLASSNAMES.OUTPUT}`);\n\n    this.setCurrent(0);\n\n    this._element.addEventListener('click', (event) => {\n      const colorControl: HTMLElement = (<HTMLElement>event.target).closest(`.${CLASSNAMES.ITEM}`);\n\n      if (!colorControl || !colorControl.dataset || !colorControl.dataset.pos) {\n        return;\n      }\n\n      const position = +colorControl.dataset.pos;\n      const color = colorControl.dataset.color;\n\n      if (this._currentElement === colorControl && color) {\n        this.removeColorFromTray(position);\n        this._removeColor(position);\n        return;\n      }\n\n      this.setCurrent(position);\n      this._setPosition(position);\n    });\n  }\n\n  setCurrent (position: number):void {\n    if (this._currentElement) {\n      this._currentElement.classList.remove(CLASSNAMES.CURRENT);\n    }\n\n    this._currentElement = this._items[position];\n    this._currentElement.classList.add(CLASSNAMES.CURRENT);\n  }\n\n  addColorToTray ({ color, position }: ISetColor): void {\n    const element = <HTMLElement> this._items[position];\n    element.style.background = color;\n    element.dataset.color = color;\n    this._currentElement.classList.add(CLASSNAMES.FILLED);\n  }\n\n  removeColorFromTray (position: number): void {\n    const element = <HTMLElement> this._items[position];\n    element.style.background = 'transparent';\n    element.classList.remove(CLASSNAMES.FILLED);\n    element.dataset.color = '';\n  }\n\n  setTrayOutput (colors: Array<string>): void {\n    this._outputElement.value = colors.join(', ');\n  }\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZnVsbC1wYWxldHRlLnRzIiwic3JjL2pzL2luZGV4LnRzIiwic3JjL2pzL25hdi50cyIsInNyYy9qcy9wYWxldHRlLWNvbnN0cnVjdG9yLnRzIiwic3JjL2pzL3BhbGV0dGVzLnRzIiwic3JjL2pzL3RhYnMudHMiLCJzcmMvanMvdHJheS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7QUNFQSxJQUFLLFNBQUw7QUFBQSxDQUFBLFVBQUssU0FBTCxFQUFjO0FBQ1osY0FBQSxPQUFBLElBQUEsb0JBQUE7QUFDQSxjQUFBLGdCQUFBLElBQUEsOEJBQUE7QUFDQSxjQUFBLGVBQUEsSUFBQSw2QkFBQTtBQUNBLGNBQUEsTUFBQSxJQUFBLDBCQUFBO0FBQ0EsY0FBQSxlQUFBLElBQUEsb0NBQUE7QUFDQSxjQUFBLFVBQUEsSUFBQSxlQUFBO0FBQ0EsY0FBQSxTQUFBLElBQUEsd0JBQUE7QUFDQSxjQUFBLGlCQUFBLElBQUEsaUNBQUE7QUFDQSxjQUFBLFFBQUEsSUFBQSxzQkFBQTtBQUNBLGNBQUEsY0FBQSxJQUFBLDZCQUFBO0FBQ0QsQ0FYRCxFQUFLLGNBQUEsWUFBUyxFQUFULENBQUw7O0lBYXFCLFc7QUFRbkIsK0JBQStEO0FBQUE7O0FBQUEsWUFBaEQsT0FBZ0QsUUFBaEQsT0FBZ0Q7QUFBQSxZQUF2QyxpQkFBdUMsUUFBdkMsaUJBQXVDOztBQUFBOztBQUM3RCxhQUFLLFFBQUwsR0FBZ0IsT0FBaEI7QUFDQSxhQUFLLGtCQUFMLEdBQTBCLGlCQUExQjtBQUNBLGFBQUssY0FBTCxHQUFzQixLQUFLLFFBQUwsQ0FBYyxhQUFkLE9BQWdDLFVBQVUsTUFBMUMsQ0FBdEI7QUFDQSxhQUFLLG9CQUFMLEdBQTRCLEtBQUssUUFBTCxDQUFjLGFBQWQsT0FBZ0MsVUFBVSxRQUExQyxDQUE1QjtBQUNBLGFBQUssbUJBQUwsR0FBMkIsS0FBSyxvQkFBTCxDQUEwQixhQUExQixPQUE0QyxVQUFVLGVBQXRELENBQTNCO0FBRUEsYUFBSyxRQUFMLENBQWMsZ0JBQWQsQ0FBK0IsT0FBL0IsRUFBd0MsVUFBQyxLQUFELEVBQVU7QUFDaEQsZ0JBQU0sZUFBZ0QsTUFBTSxNQUFOLENBQWMsT0FBZCxPQUEwQixVQUFVLEtBQXBDLENBQXREO0FBRUEsZ0JBQUksQ0FBQyxZQUFMLEVBQW1CO0FBQ2pCO0FBQ0Q7QUFFRCxrQkFBSyxrQkFBTCxDQUF3QixhQUFhLEtBQXJDO0FBQ0QsU0FSRDtBQVVBLGFBQUssb0JBQUwsQ0FBMEIsZ0JBQTFCLENBQTJDLE9BQTNDLEVBQW9ELFVBQUMsS0FBRCxFQUFVO0FBQzVELGdCQUFNLGNBQStDLE1BQU0sTUFBTixDQUFjLE9BQWQsT0FBMEIsVUFBVSxPQUFwQyxDQUFyRDtBQUVBLGdCQUFJLENBQUMsV0FBTCxFQUFrQjtBQUNoQjtBQUNEO0FBRUQsa0JBQUssbUJBQUwsQ0FBeUIsU0FBekIsQ0FBbUMsTUFBbkMsQ0FBMEMsVUFBVSxlQUFwRDtBQUNBLGdCQUFJLFlBQVksS0FBWixLQUFzQixPQUExQixFQUFtQztBQUNqQyxzQkFBSyxjQUFMLENBQW9CLFNBQXBCLENBQThCLEdBQTlCLENBQWtDLFVBQVUsWUFBNUM7QUFDRCxhQUZELE1BRU87QUFDTCxzQkFBSyxjQUFMLENBQW9CLFNBQXBCLENBQThCLE1BQTlCLENBQXFDLFVBQVUsWUFBL0M7QUFDRDtBQUVELGtCQUFLLG1CQUFMLEdBQTJCLFdBQTNCO0FBQ0Esa0JBQUssbUJBQUwsQ0FBeUIsU0FBekIsQ0FBbUMsR0FBbkMsQ0FBdUMsVUFBVSxlQUFqRDtBQUNELFNBaEJEO0FBaUJEOzs7O29DQUVZLEssRUFBYTtBQUN4QixnQkFBTSxlQUFlLEtBQUssUUFBTCxDQUFjLGFBQWQsYUFBc0MsS0FBdEMsQ0FBckI7QUFDQSx5QkFBYSxTQUFiLENBQXVCLEdBQXZCLENBQTJCLFVBQVUsY0FBckM7QUFDRDs7O3NDQUVjLEssRUFBYTtBQUMxQixnQkFBTSxlQUFlLEtBQUssUUFBTCxDQUFjLGFBQWQsYUFBc0MsS0FBdEMsQ0FBckI7QUFDQSx5QkFBYSxTQUFiLENBQXVCLE1BQXZCLENBQThCLFVBQVUsY0FBeEM7QUFDQSxpQkFBSyxvQkFBTCxDQUEwQixTQUExQixDQUFvQyxNQUFwQyxDQUEyQyxVQUFVLGFBQXJEO0FBQ0Q7Ozt3Q0FFZ0IsSyxFQUFhO0FBQzVCLGdCQUFJLEtBQUssb0JBQVQsRUFBK0I7QUFDN0IscUJBQUssb0JBQUwsQ0FBMEIsU0FBMUIsQ0FBb0MsTUFBcEMsQ0FBMkMsVUFBVSxhQUFyRDtBQUNEO0FBRUQsZ0JBQUksQ0FBQyxLQUFMLEVBQVk7QUFDVjtBQUNEO0FBRUQsaUJBQUssb0JBQUwsR0FBNEIsS0FBSyxRQUFMLENBQWMsYUFBZCxhQUFzQyxLQUF0QyxDQUE1QjtBQUNBLGlCQUFLLG9CQUFMLENBQTBCLFNBQTFCLENBQW9DLEdBQXBDLENBQXdDLFVBQVUsYUFBbEQ7QUFDRDs7Ozs7O0FBbEVILFFBQUEsT0FBQSxHQUFBLFdBQUE7Ozs7OztBQ2ZBLElBQUEsUUFBQSxRQUFBLE9BQUEsQ0FBQTtBQUNBLElBQUEsU0FBQSxRQUFBLFFBQUEsQ0FBQTtBQUNBLElBQUEsYUFBQSxRQUFBLFlBQUEsQ0FBQTtBQUNBLElBQUEsd0JBQUEsUUFBQSx1QkFBQSxDQUFBO0FBRUEsU0FBUyxJQUFULENBQWMsU0FBZCxDQUF3QixNQUF4QixDQUErQixPQUEvQjtBQUVBLElBQU0sYUFBMEIsU0FBUyxhQUFULENBQXVCLE1BQXZCLENBQWhDO0FBQ0EsSUFBTSxjQUEyQixTQUFTLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBakM7QUFDQSxJQUFNLGtCQUErQixTQUFTLGFBQVQsQ0FBdUIsV0FBdkIsQ0FBckM7QUFDQSxJQUFNLHFCQUFrQyxTQUFTLGFBQVQsQ0FBdUIsZUFBdkIsQ0FBeEM7QUFDQSxJQUFNLHVCQUFvQyxTQUFTLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBMUM7QUFFQSxJQUFNLG1CQUFtQixTQUFTLFFBQVQsQ0FBa0IsSUFBbEIsR0FDckIsU0FBUyxRQUFULENBQWtCLElBQWxCLENBQXVCLE1BQXZCLENBQThCLENBQTlCLENBRHFCLEdBRXJCLGNBRko7QUFJQSxJQUFNLE9BQU8sSUFBSSxPQUFBLE9BQUosQ0FBUyxFQUFFLFNBQVMsV0FBWCxFQUFULENBQWI7QUFDQSxJQUFNLE1BQU0sSUFBSSxNQUFBLE9BQUosQ0FBUTtBQUNsQixhQUFTLFVBRFM7QUFFbEIsbUJBQWUsS0FBSztBQUZGLENBQVIsQ0FBWjtBQUtBLHNCQUFBLHNCQUFBLENBQXVCO0FBQ3JCLDBDQURxQjtBQUVyQjtBQUZxQixDQUF2QjtBQUtBLFdBQUEsa0JBQUEsQ0FBbUIsRUFBRSxTQUFTLGVBQVgsRUFBbkI7QUFFQSxJQUFJLFVBQUosQ0FBZSxnQkFBZjtBQUNBLEtBQUssVUFBTCxDQUFnQixnQkFBaEI7Ozs7Ozs7Ozs7QUM3QkEsSUFBSyxTQUFMO0FBQUEsQ0FBQSxVQUFLLFNBQUwsRUFBYztBQUNaLGNBQUEsTUFBQSxJQUFBLFdBQUE7QUFDQSxjQUFBLFNBQUEsSUFBQSxvQkFBQTtBQUNELENBSEQsRUFBSyxjQUFBLFlBQVMsRUFBVCxDQUFMOztJQUtxQixHO0FBTW5CLHVCQUE2QztBQUFBLFlBQTlCLE9BQThCLFFBQTlCLE9BQThCO0FBQUEsWUFBckIsYUFBcUIsUUFBckIsYUFBcUI7O0FBQUE7O0FBQzNDLGFBQUssUUFBTCxHQUFnQixPQUFoQjtBQUNBLGFBQUssTUFBTCxHQUFjLEtBQUssU0FBTCxFQUFkO0FBQ0EsYUFBSyxRQUFMLEdBQWdCLElBQWhCO0FBQ0EsYUFBSyxjQUFMLEdBQXNCLGFBQXRCO0FBRUEsYUFBSyxVQUFMLEdBQWtCLEtBQUssVUFBTCxDQUFnQixJQUFoQixDQUFxQixJQUFyQixDQUFsQjtBQUVBLGFBQUssVUFBTDtBQUNEOzs7O3FDQUVTO0FBQUE7O0FBQ1IsaUJBQUssUUFBTCxDQUFjLGdCQUFkLENBQStCLE9BQS9CLEVBQXdDLFVBQUMsS0FBRCxFQUFVO0FBQ2hELHNCQUFNLGNBQU47QUFDQSxvQkFBTSxVQUF3QixNQUFNLE1BQU4sQ0FBYyxPQUE1QztBQUVBLG9CQUFJLENBQUMsT0FBRCxJQUFZLENBQUMsUUFBUSxNQUF6QixFQUFpQztBQUMvQjtBQUNEO0FBRUQsc0JBQUssVUFBTCxDQUFnQixRQUFRLE1BQXhCO0FBQ0Esc0JBQUssY0FBTCxDQUFvQixRQUFRLE1BQTVCO0FBQ0QsYUFWRDtBQVdEOzs7bUNBRVcsRSxFQUFVO0FBQ3BCLGdCQUFJLEtBQUssUUFBVCxFQUFtQjtBQUNqQixxQkFBSyxRQUFMLENBQWMsU0FBZCxDQUF3QixNQUF4QixDQUErQixVQUFVLE9BQXpDO0FBQ0Q7QUFFRCxpQkFBSyxRQUFMLEdBQThCLEtBQUssTUFBTCxDQUFZLEVBQVosQ0FBOUI7QUFDQSxpQkFBSyxRQUFMLENBQWMsU0FBZCxDQUF3QixHQUF4QixDQUE0QixVQUFVLE9BQXRDO0FBRUEsb0JBQVEsU0FBUixDQUFrQixJQUFsQixFQUF3QixJQUF4QixRQUFrQyxFQUFsQztBQUNEOzs7b0NBRVE7QUFDUCxnQkFBTSxRQUFRLE1BQU0sSUFBTixDQUFXLEtBQUssUUFBTCxDQUFjLGdCQUFkLE9BQW1DLFVBQVUsSUFBN0MsQ0FBWCxDQUFkO0FBRUEsbUJBQU8sTUFBTSxNQUFOLENBQWEsVUFBQyxJQUFELEVBQW9DLElBQXBDLEVBQXlEO0FBQzNFLG9CQUFNLFVBQVUsS0FBSyxPQUFyQjtBQUVBLG9CQUFJLENBQUMsT0FBRCxJQUFZLENBQUMsUUFBUSxNQUF6QixFQUFpQztBQUMvQiwyQkFBTyxJQUFQO0FBQ0Q7QUFFRCxvQkFBTSxTQUFTLFFBQVEsTUFBdkI7QUFFQSxxQkFBSyxNQUFMLElBQWUsSUFBZjtBQUVBLHVCQUFPLElBQVA7QUFDRCxhQVpNLEVBWUosRUFaSSxDQUFQO0FBYUQ7Ozs7OztBQTFESCxRQUFBLE9BQUEsR0FBQSxHQUFBOzs7Ozs7O0FDTkEsSUFBQSxpQkFBQSxRQUFBLGdCQUFBLENBQUE7QUFDQSxJQUFBLFNBQUEsUUFBQSxRQUFBLENBQUE7QUFFQSxJQUFNLGFBQWEsQ0FBbkI7QUFFYSxRQUFBLHNCQUFBLEdBQXlCLGdCQUEwRTtBQUFBLFFBQXZFLGtCQUF1RSxRQUF2RSxrQkFBdUU7QUFBQSxRQUFuRCxvQkFBbUQsUUFBbkQsb0JBQW1EOztBQUM5RyxRQUFNLE9BQWMsSUFBSSxPQUFBLE9BQUosQ0FBUztBQUMzQixpQkFBUyxvQkFEa0I7QUFFM0IsZ0NBRjJCO0FBRzNCO0FBSDJCLEtBQVQsQ0FBcEI7QUFNQSxRQUFNLGNBQTRCLElBQUksZUFBQSxPQUFKLENBQWdCO0FBQ2hELGlCQUFTLGtCQUR1QztBQUVoRCwyQkFBbUI7QUFGNkIsS0FBaEIsQ0FBbEM7QUFLQSxRQUFNLFNBQXdCLEVBQTlCO0FBQ0EsUUFBSSxrQkFBa0IsQ0FBdEI7QUFFQTtBQUNBO0FBQ0EsUUFBSSxlQUFlLElBQW5CO0FBRUEsYUFBUyxXQUFULENBQXNCLEtBQXRCLEVBQW1DO0FBQ2pDLFlBQU0sa0JBQWtCLGlCQUF4QjtBQUVBLFlBQUksb0JBQW9CLEtBQXhCLEVBQStCO0FBQzdCLHdCQUFZLGVBQVo7QUFDQSxpQkFBSyxtQkFBTCxDQUF5QixlQUF6QjtBQUNBO0FBQ0Q7QUFFRCxpQkFBUyxLQUFUO0FBRUE7QUFFQSxvQkFBWSxlQUFaLENBQTRCLGlCQUE1QjtBQUNEO0FBRUQsYUFBUyxXQUFULEdBQW9CO0FBQ2xCLFlBQUksWUFBSixFQUFrQjtBQUNoQixnQkFBSSxrQkFBa0IsYUFBYSxDQUFuQyxFQUFzQztBQUNwQztBQUNBLHFCQUFLLFVBQUwsQ0FBZ0IsZUFBaEI7QUFDRCxhQUhELE1BR087QUFDTCwrQkFBZSxLQUFmO0FBQ0Q7QUFDRjtBQUNGO0FBRUQsYUFBUyxXQUFULENBQXNCLFFBQXRCLEVBQXNDO0FBQ3BDLFlBQUksT0FBTyxRQUFQLEtBQW9CLFFBQXhCLEVBQWtDO0FBQ2hDO0FBQ0Q7QUFFRCwwQkFBa0IsUUFBbEI7QUFDQSxvQkFBWSxlQUFaLENBQTRCLGlCQUE1QjtBQUVBLFlBQU0sZ0JBQWdCLGtCQUF0QjtBQUVBLFlBQUksY0FBYyxNQUFkLEtBQXlCLENBQXpCLElBQThCLG9CQUFvQixDQUF0RCxFQUF5RDtBQUN2RCwyQkFBZSxJQUFmO0FBQ0QsU0FGRCxNQUVPO0FBQ0wsMkJBQWUsS0FBZjtBQUNEO0FBQ0Y7QUFFRCxhQUFTLFFBQVQsQ0FBbUIsS0FBbkIsRUFBZ0M7QUFDOUIsWUFBTSxvQkFBb0IsaUJBQTFCO0FBQ0EsZUFBTyxlQUFQLElBQTBCLEtBQTFCO0FBRUEsWUFBTSwyQkFBMkIscUJBQzVCLHNCQUFzQixLQURNLElBRTVCLENBQUMsT0FBTyxRQUFQLENBQWdCLGlCQUFoQixDQUZOO0FBSUEsWUFBSSx3QkFBSixFQUE4QjtBQUM1QjtBQUNBLHdCQUFZLGFBQVosQ0FBMEIsaUJBQTFCO0FBQ0Q7QUFFRCxhQUFLLGNBQUwsQ0FBb0I7QUFDbEIsd0JBRGtCO0FBRWxCLHNCQUFVO0FBRlEsU0FBcEI7QUFJQSxvQkFBWSxXQUFaLENBQXdCLEtBQXhCO0FBRUEsYUFBSyxhQUFMLENBQW1CLGtCQUFuQjtBQUNEO0FBRUQsYUFBUyxXQUFULENBQXNCLFFBQXRCLEVBQXNDO0FBQ3BDLFlBQU0sUUFBUSxPQUFPLFFBQVAsQ0FBZDtBQUNBLGVBQU8sUUFBUCxJQUFtQixFQUFuQjtBQUVBLFlBQUksQ0FBQyxPQUFPLFFBQVAsQ0FBZ0IsS0FBaEIsQ0FBTCxFQUE2QjtBQUMzQix3QkFBWSxhQUFaLENBQTBCLEtBQTFCO0FBQ0Q7QUFFRCxZQUFNLGdCQUFnQixrQkFBdEI7QUFDQSxZQUFJLGNBQWMsTUFBZCxLQUF5QixDQUE3QixFQUFnQztBQUM5QiwyQkFBZSxJQUFmO0FBQ0Q7QUFFRCxhQUFLLGFBQUwsQ0FBbUIsYUFBbkI7QUFDQSxvQkFBWSxlQUFaLENBQTRCLGlCQUE1QjtBQUNEO0FBRUQsYUFBUyxnQkFBVCxHQUF5QjtBQUN2QixlQUFPLE9BQU8sTUFBUCxDQUFjO0FBQUEsbUJBQVEsSUFBUjtBQUFBLFNBQWQsQ0FBUDtBQUNEO0FBRUQsYUFBUyxlQUFULEdBQXdCO0FBQ3RCLGVBQU8sT0FBTyxlQUFQLENBQVA7QUFDRDtBQUNGLENBN0dZOzs7Ozs7O0FDSmIsSUFBSyxTQUFMO0FBQUEsQ0FBQSxVQUFLLFNBQUwsRUFBYztBQUNaLGNBQUEsTUFBQSxJQUFBLGNBQUE7QUFDQSxjQUFBLFNBQUEsSUFBQSx1QkFBQTtBQUNELENBSEQsRUFBSyxjQUFBLFlBQVMsRUFBVCxDQUFMO0FBS2EsUUFBQSxrQkFBQSxHQUFxQixnQkFBaUM7QUFBQSxRQUE5QixPQUE4QixRQUE5QixPQUE4Qjs7QUFDakUsUUFBSSxVQUF1QixJQUEzQjtBQUVBLFlBQVEsZ0JBQVIsQ0FBeUIsT0FBekIsRUFBa0MsVUFBQyxLQUFELEVBQVU7QUFDMUMsWUFBTSxVQUF3QixNQUFNLE1BQU4sQ0FBYyxPQUFkLE9BQTBCLFVBQVUsSUFBcEMsQ0FBOUI7QUFFQSxZQUFJLENBQUMsT0FBRCxJQUFZLFFBQVEsU0FBUixDQUFrQixRQUFsQixDQUEyQixVQUFVLE9BQXJDLENBQWhCLEVBQStEO0FBQzdEO0FBQ0Q7QUFFRCxZQUFJLE9BQUosRUFBYTtBQUNYLG9CQUFRLFNBQVIsQ0FBa0IsTUFBbEIsQ0FBeUIsVUFBVSxPQUFuQztBQUNEO0FBRUQsa0JBQXVCLE9BQXZCO0FBQ0EsZ0JBQVEsU0FBUixDQUFrQixHQUFsQixDQUFzQixVQUFVLE9BQWhDO0FBQ0QsS0FiRDtBQWNELENBakJZOzs7Ozs7Ozs7O0FDTGIsSUFBSyxTQUFMO0FBQUEsQ0FBQSxVQUFLLFNBQUwsRUFBYztBQUNaLGNBQUEsTUFBQSxJQUFBLFNBQUE7QUFDQSxjQUFBLFNBQUEsSUFBQSxrQkFBQTtBQUNELENBSEQsRUFBSyxjQUFBLFlBQVMsRUFBVCxDQUFMOztJQUtxQixJO0FBS25CLHdCQUErQjtBQUFBLFlBQWhCLE9BQWdCLFFBQWhCLE9BQWdCOztBQUFBOztBQUM3QixhQUFLLFFBQUwsR0FBZ0IsT0FBaEI7QUFDQSxhQUFLLE1BQUwsR0FBYyxLQUFLLFNBQUwsRUFBZDtBQUNBLGFBQUssUUFBTCxHQUFnQixJQUFoQjtBQUVBLGFBQUssVUFBTCxHQUFrQixLQUFLLFVBQUwsQ0FBZ0IsSUFBaEIsQ0FBcUIsSUFBckIsQ0FBbEI7QUFDRDs7OztvQ0FFUTtBQUNQLGdCQUFNLFFBQVEsTUFBTSxJQUFOLENBQVcsS0FBSyxRQUFMLENBQWMsZ0JBQWQsT0FBbUMsVUFBVSxJQUE3QyxVQUFYLENBQWQ7QUFFQSxtQkFBTyxNQUFNLE1BQU4sQ0FBYSxVQUFDLElBQUQsRUFBb0MsSUFBcEMsRUFBeUQ7QUFDM0UscUJBQUssS0FBSyxFQUFWLElBQWdCLElBQWhCO0FBRUEsdUJBQU8sSUFBUDtBQUNELGFBSk0sRUFJSixFQUpJLENBQVA7QUFLRDs7O21DQUVXLEUsRUFBVTtBQUNwQixnQkFBSSxDQUFDLEtBQUssTUFBTCxDQUFZLEVBQVosQ0FBTCxFQUFzQjtBQUNwQjtBQUNEO0FBRUQsZ0JBQUksS0FBSyxRQUFULEVBQW1CO0FBQ2pCLHFCQUFLLFFBQUwsQ0FBYyxTQUFkLENBQXdCLE1BQXhCLENBQStCLFVBQVUsT0FBekM7QUFDRDtBQUVELGlCQUFLLFFBQUwsR0FBZ0IsS0FBSyxNQUFMLENBQVksRUFBWixDQUFoQjtBQUNBLGlCQUFLLFFBQUwsQ0FBYyxTQUFkLENBQXdCLEdBQXhCLENBQTRCLFVBQVUsT0FBdEM7QUFDRDs7Ozs7O0FBbENILFFBQUEsT0FBQSxHQUFBLElBQUE7Ozs7Ozs7Ozs7QUNMQSxJQUFLLFVBQUw7QUFBQSxDQUFBLFVBQUssVUFBTCxFQUFlO0FBQ2IsZUFBQSxNQUFBLElBQUEsYUFBQTtBQUNBLGVBQUEsU0FBQSxJQUFBLHNCQUFBO0FBQ0EsZUFBQSxRQUFBLElBQUEscUJBQUE7QUFDQSxlQUFBLFFBQUEsSUFBQSxjQUFBO0FBQ0QsQ0FMRCxFQUFLLGVBQUEsYUFBVSxFQUFWLENBQUw7O0lBT3FCLEk7QUFTbkIsd0JBQStEO0FBQUE7O0FBQUEsWUFBaEQsT0FBZ0QsUUFBaEQsT0FBZ0Q7QUFBQSxZQUF2QyxXQUF1QyxRQUF2QyxXQUF1QztBQUFBLFlBQTFCLFdBQTBCLFFBQTFCLFdBQTBCOztBQUFBOztBQUM3RCxhQUFLLFFBQUwsR0FBZ0IsT0FBaEI7QUFDQSxhQUFLLFlBQUwsR0FBb0IsV0FBcEI7QUFDQSxhQUFLLFlBQUwsR0FBb0IsV0FBcEI7QUFDQSxhQUFLLGVBQUwsR0FBdUIsSUFBdkI7QUFDQSxhQUFLLE1BQUwsR0FBYyxLQUFLLFFBQUwsQ0FBYyxnQkFBZCxPQUFtQyxXQUFXLElBQTlDLENBQWQ7QUFDQSxhQUFLLGNBQUwsR0FBc0IsS0FBSyxRQUFMLENBQWMsYUFBZCxPQUFnQyxXQUFXLE1BQTNDLENBQXRCO0FBRUEsYUFBSyxVQUFMLENBQWdCLENBQWhCO0FBRUEsYUFBSyxRQUFMLENBQWMsZ0JBQWQsQ0FBK0IsT0FBL0IsRUFBd0MsVUFBQyxLQUFELEVBQVU7QUFDaEQsZ0JBQU0sZUFBMEMsTUFBTSxNQUFOLENBQWMsT0FBZCxPQUEwQixXQUFXLElBQXJDLENBQWhEO0FBRUEsZ0JBQUksQ0FBQyxZQUFELElBQWlCLENBQUMsYUFBYSxPQUEvQixJQUEwQyxDQUFDLGFBQWEsT0FBYixDQUFxQixHQUFwRSxFQUF5RTtBQUN2RTtBQUNEO0FBRUQsZ0JBQU0sV0FBVyxDQUFDLGFBQWEsT0FBYixDQUFxQixHQUF2QztBQUNBLGdCQUFNLFFBQVEsYUFBYSxPQUFiLENBQXFCLEtBQW5DO0FBRUEsZ0JBQUksTUFBSyxlQUFMLEtBQXlCLFlBQXpCLElBQXlDLEtBQTdDLEVBQW9EO0FBQ2xELHNCQUFLLG1CQUFMLENBQXlCLFFBQXpCO0FBQ0Esc0JBQUssWUFBTCxDQUFrQixRQUFsQjtBQUNBO0FBQ0Q7QUFFRCxrQkFBSyxVQUFMLENBQWdCLFFBQWhCO0FBQ0Esa0JBQUssWUFBTCxDQUFrQixRQUFsQjtBQUNELFNBbEJEO0FBbUJEOzs7O21DQUVXLFEsRUFBZ0I7QUFDMUIsZ0JBQUksS0FBSyxlQUFULEVBQTBCO0FBQ3hCLHFCQUFLLGVBQUwsQ0FBcUIsU0FBckIsQ0FBK0IsTUFBL0IsQ0FBc0MsV0FBVyxPQUFqRDtBQUNEO0FBRUQsaUJBQUssZUFBTCxHQUF1QixLQUFLLE1BQUwsQ0FBWSxRQUFaLENBQXZCO0FBQ0EsaUJBQUssZUFBTCxDQUFxQixTQUFyQixDQUErQixHQUEvQixDQUFtQyxXQUFXLE9BQTlDO0FBQ0Q7Ozs4Q0FFNkM7QUFBQSxnQkFBNUIsS0FBNEIsU0FBNUIsS0FBNEI7QUFBQSxnQkFBckIsUUFBcUIsU0FBckIsUUFBcUI7O0FBQzVDLGdCQUFNLFVBQXdCLEtBQUssTUFBTCxDQUFZLFFBQVosQ0FBOUI7QUFDQSxvQkFBUSxLQUFSLENBQWMsVUFBZCxHQUEyQixLQUEzQjtBQUNBLG9CQUFRLE9BQVIsQ0FBZ0IsS0FBaEIsR0FBd0IsS0FBeEI7QUFDQSxpQkFBSyxlQUFMLENBQXFCLFNBQXJCLENBQStCLEdBQS9CLENBQW1DLFdBQVcsTUFBOUM7QUFDRDs7OzRDQUVvQixRLEVBQWdCO0FBQ25DLGdCQUFNLFVBQXdCLEtBQUssTUFBTCxDQUFZLFFBQVosQ0FBOUI7QUFDQSxvQkFBUSxLQUFSLENBQWMsVUFBZCxHQUEyQixhQUEzQjtBQUNBLG9CQUFRLFNBQVIsQ0FBa0IsTUFBbEIsQ0FBeUIsV0FBVyxNQUFwQztBQUNBLG9CQUFRLE9BQVIsQ0FBZ0IsS0FBaEIsR0FBd0IsRUFBeEI7QUFDRDs7O3NDQUVjLE0sRUFBcUI7QUFDbEMsaUJBQUssY0FBTCxDQUFvQixLQUFwQixHQUE0QixPQUFPLElBQVAsQ0FBWSxJQUFaLENBQTVCO0FBQ0Q7Ozs7OztBQWpFSCxRQUFBLE9BQUEsR0FBQSxJQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IHsgSUZ1bGxQYWxldHRlUGFyYW1zIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuZW51bSBDTEFTU05BTUUge1xuICBDT0xPUiA9ICdmdWxsLXBhbGV0dGUtY29sb3InLFxuICBDT0xPUl9TRUxFQ1RFRCA9ICdmdWxsLXBhbGV0dGUtY29sb3ItLXNlbGVjdGVkJyxcbiAgQ09MT1JfQ1VSUkVOVCA9ICdmdWxsLXBhbGV0dGUtY29sb3ItLWN1cnJlbnQnLFxuICBWSUVXID0gJ2Z1bGwtcGFsZXR0ZS1jb2xvcl9fdmlldycsXG4gIFZJRVdfU0VMRUNURUQgPSAnZnVsbC1wYWxldHRlLWNvbG9yX192aWV3LS1zZWxlY3RlZCcsXG4gIENPTlRST0xTID0gJ3ZpZXctY29udHJvbHMnLFxuICBDT05UUk9MID0gJ3ZpZXctY29udHJvbHNfX2NvbnRyb2wnLFxuICBDT05UUk9MX0NVUlJFTlQgPSAndmlldy1jb250cm9sc19fY29udHJvbC0tY3VycmVudCcsXG4gIENPTE9SUyA9ICdmdWxsLXBhbGV0dGVfX2NvbG9ycycsXG4gIENPTE9SU19USUxFUyA9ICdmdWxsLXBhbGV0dGVfX2NvbG9ycy0tdGlsZXMnXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZ1bGxQYWxldHRlIHtcbiAgX2VsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBfY29sb3JDbGlja0hhbmRsZXI6IChjb2xvcjogc3RyaW5nKSA9PiB2b2lkO1xuICBfY3VycmVudENvbG9yRWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gIF92aWV3Q29udHJvbHNFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgX2N1cnJlbnRWaWV3Q29udHJvbDogSFRNTEVsZW1lbnQ7XG4gIF9jb2xvcnNFbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvciAoeyBlbGVtZW50LCBjb2xvckNsaWNrSGFuZGxlciB9OiBJRnVsbFBhbGV0dGVQYXJhbXMpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLl9jb2xvckNsaWNrSGFuZGxlciA9IGNvbG9yQ2xpY2tIYW5kbGVyO1xuICAgIHRoaXMuX2NvbG9yc0VsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke0NMQVNTTkFNRS5DT0xPUlN9YCk7XG4gICAgdGhpcy5fdmlld0NvbnRyb2xzRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Q0xBU1NOQU1FLkNPTlRST0xTfWApO1xuICAgIHRoaXMuX2N1cnJlbnRWaWV3Q29udHJvbCA9IHRoaXMuX3ZpZXdDb250cm9sc0VsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Q0xBU1NOQU1FLkNPTlRST0xfQ1VSUkVOVH1gKTtcblxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGNvbG9yQ29udHJvbDogSFRNTEJ1dHRvbkVsZW1lbnQgPSAoPEhUTUxFbGVtZW50PmV2ZW50LnRhcmdldCkuY2xvc2VzdChgLiR7Q0xBU1NOQU1FLkNPTE9SfWApO1xuXG4gICAgICBpZiAoIWNvbG9yQ29udHJvbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NvbG9yQ2xpY2tIYW5kbGVyKGNvbG9yQ29udHJvbC52YWx1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl92aWV3Q29udHJvbHNFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCB2aWV3Q29udHJvbDogSFRNTEJ1dHRvbkVsZW1lbnQgPSAoPEhUTUxFbGVtZW50PmV2ZW50LnRhcmdldCkuY2xvc2VzdChgLiR7Q0xBU1NOQU1FLkNPTlRST0x9YCk7XG5cbiAgICAgIGlmICghdmlld0NvbnRyb2wpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9jdXJyZW50Vmlld0NvbnRyb2wuY2xhc3NMaXN0LnJlbW92ZShDTEFTU05BTUUuQ09OVFJPTF9DVVJSRU5UKTtcbiAgICAgIGlmICh2aWV3Q29udHJvbC52YWx1ZSA9PT0gJ3RpbGVzJykge1xuICAgICAgICB0aGlzLl9jb2xvcnNFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FLkNPTE9SU19USUxFUyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jb2xvcnNFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NOQU1FLkNPTE9SU19USUxFUyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2N1cnJlbnRWaWV3Q29udHJvbCA9IHZpZXdDb250cm9sO1xuICAgICAgdGhpcy5fY3VycmVudFZpZXdDb250cm9sLmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FLkNPTlRST0xfQ1VSUkVOVCk7XG4gICAgfSk7XG4gIH1cblxuICBzZWxlY3RDb2xvciAoY29sb3I6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGNvbG9yQ29udHJvbCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihgI2NvbG9yLSR7Y29sb3J9YCk7XG4gICAgY29sb3JDb250cm9sLmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FLkNPTE9SX1NFTEVDVEVEKTtcbiAgfVxuXG4gIHVuc2VsZWN0Q29sb3IgKGNvbG9yOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBjb2xvckNvbnRyb2wgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjb2xvci0ke2NvbG9yfWApO1xuICAgIGNvbG9yQ29udHJvbC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTTkFNRS5DT0xPUl9TRUxFQ1RFRCk7XG4gICAgdGhpcy5fY3VycmVudENvbG9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTTkFNRS5DT0xPUl9DVVJSRU5UKTtcbiAgfVxuXG4gIHNldEN1cnJlbnRDb2xvciAoY29sb3I6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jdXJyZW50Q29sb3JFbGVtZW50KSB7XG4gICAgICB0aGlzLl9jdXJyZW50Q29sb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NOQU1FLkNPTE9SX0NVUlJFTlQpO1xuICAgIH1cblxuICAgIGlmICghY29sb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9jdXJyZW50Q29sb3JFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjY29sb3ItJHtjb2xvcn1gKTtcbiAgICB0aGlzLl9jdXJyZW50Q29sb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FLkNPTE9SX0NVUlJFTlQpO1xuICB9XG59XG4iLCJpbXBvcnQgTmF2IGZyb20gJy4vbmF2JztcbmltcG9ydCBUYWJzIGZyb20gJy4vdGFicyc7XG5pbXBvcnQgeyBhZGRQYWxldHRlc0FjdGlvbnMgfSBmcm9tICcuL3BhbGV0dGVzJztcbmltcG9ydCB7IGluaXRQYWxldHRlQ29uc3RydWN0b3IgfSBmcm9tICcuL3BhbGV0dGUtY29uc3RydWN0b3InO1xuXG5kb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ25vLWpzJyk7XG5cbmNvbnN0IG5hdkVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdicpO1xuY29uc3QgbWFpbkVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4nKTtcbmNvbnN0IHBhbGV0dGVzRWxlbWVudDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFsZXR0ZXMnKTtcbmNvbnN0IGZ1bGxQYWxldHRlRWxlbWVudDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZnVsbC1wYWxldHRlJyk7XG5jb25zdCBjcmVhdGVQYWxldHRlRWxlbWVudDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHJheScpO1xuXG5jb25zdCBjdXJyZW50U2VjdGlvbklkID0gZG9jdW1lbnQubG9jYXRpb24uaGFzaFxuICA/IGRvY3VtZW50LmxvY2F0aW9uLmhhc2guc3Vic3RyKDEpXG4gIDogJ2Z1bGwtcGFsZXR0ZSc7XG5cbmNvbnN0IHRhYnMgPSBuZXcgVGFicyh7IGVsZW1lbnQ6IG1haW5FbGVtZW50IH0pO1xuY29uc3QgbmF2ID0gbmV3IE5hdih7XG4gIGVsZW1lbnQ6IG5hdkVsZW1lbnQsXG4gIHNldEN1cnJlbnRUYWI6IHRhYnMuc2V0Q3VycmVudFxufSk7XG5cbmluaXRQYWxldHRlQ29uc3RydWN0b3Ioe1xuICBmdWxsUGFsZXR0ZUVsZW1lbnQsXG4gIGNyZWF0ZVBhbGV0dGVFbGVtZW50XG59KTtcblxuYWRkUGFsZXR0ZXNBY3Rpb25zKHsgZWxlbWVudDogcGFsZXR0ZXNFbGVtZW50IH0pO1xuXG5uYXYuc2V0Q3VycmVudChjdXJyZW50U2VjdGlvbklkKTtcbnRhYnMuc2V0Q3VycmVudChjdXJyZW50U2VjdGlvbklkKTtcbiIsImltcG9ydCB7IElOYXYgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuXG5lbnVtIENMQVNTTkFNRSB7XG4gIElURU0gPSAnbmF2X19pdGVtJyxcbiAgQ1VSUkVOVCA9ICduYXZfX2l0ZW0tLWN1cnJlbnQnXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5hdiB7XG4gIF9lbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgX2N1cnJlbnQ6IEhUTUxFbGVtZW50O1xuICBfaXRlbXM6IFJlY29yZDxzdHJpbmcsIEhUTUxFbGVtZW50PlxuICBfc2V0Q3VycmVudFRhYjogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IgKHsgZWxlbWVudCwgc2V0Q3VycmVudFRhYiB9OiBJTmF2KSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5faXRlbXMgPSB0aGlzLl9nZXRJdGVtcygpO1xuICAgIHRoaXMuX2N1cnJlbnQgPSBudWxsO1xuICAgIHRoaXMuX3NldEN1cnJlbnRUYWIgPSBzZXRDdXJyZW50VGFiO1xuXG4gICAgdGhpcy5zZXRDdXJyZW50ID0gdGhpcy5zZXRDdXJyZW50LmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLl9hZGRFdmVudHMoKTtcbiAgfVxuXG4gIF9hZGRFdmVudHMgKCk6IHZvaWQge1xuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCBkYXRhc2V0ID0gKDxIVE1MRWxlbWVudD5ldmVudC50YXJnZXQpLmRhdGFzZXQ7XG5cbiAgICAgIGlmICghZGF0YXNldCB8fCAhZGF0YXNldC50YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldEN1cnJlbnQoZGF0YXNldC50YXJnZXQpO1xuICAgICAgdGhpcy5fc2V0Q3VycmVudFRhYihkYXRhc2V0LnRhcmdldCk7XG4gICAgfSk7XG4gIH1cblxuICBzZXRDdXJyZW50IChpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnQpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU05BTUUuQ1VSUkVOVCk7XG4gICAgfVxuXG4gICAgdGhpcy5fY3VycmVudCA9IDxIVE1MRWxlbWVudD4odGhpcy5faXRlbXNbaWRdKTtcbiAgICB0aGlzLl9jdXJyZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FLkNVUlJFTlQpO1xuXG4gICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgYCMke2lkfWApO1xuICB9XG5cbiAgX2dldEl0ZW1zICgpOiBSZWNvcmQ8c3RyaW5nLCBIVE1MRWxlbWVudD4ge1xuICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbSh0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke0NMQVNTTkFNRS5JVEVNfWApKTtcblxuICAgIHJldHVybiBpdGVtcy5yZWR1Y2UoKHByZXY6IFJlY29yZDxzdHJpbmcsIEhUTUxFbGVtZW50PiwgaXRlbTogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IGRhdGFzZXQgPSBpdGVtLmRhdGFzZXQ7XG5cbiAgICAgIGlmICghZGF0YXNldCB8fCAhZGF0YXNldC50YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRhcmdldCA9IGRhdGFzZXQudGFyZ2V0O1xuXG4gICAgICBwcmV2W3RhcmdldF0gPSBpdGVtO1xuXG4gICAgICByZXR1cm4gcHJldjtcbiAgICB9LCB7fSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IElQYWxldHRlQ29udHJ1Y3RvciwgSUZ1bGxQYWxldHRlLCBJVHJheSB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgRnVsbFBhbGV0dGUgZnJvbSAnLi9mdWxsLXBhbGV0dGUnO1xuaW1wb3J0IFRyYXkgZnJvbSAnLi90cmF5JztcblxuY29uc3QgTUFYX0NPTE9SUyA9IDU7XG5cbmV4cG9ydCBjb25zdCBpbml0UGFsZXR0ZUNvbnN0cnVjdG9yID0gKHsgZnVsbFBhbGV0dGVFbGVtZW50LCBjcmVhdGVQYWxldHRlRWxlbWVudCB9OiBJUGFsZXR0ZUNvbnRydWN0b3IpOnZvaWQgPT4ge1xuICBjb25zdCB0cmF5OiBJVHJheSA9IG5ldyBUcmF5KHtcbiAgICBlbGVtZW50OiBjcmVhdGVQYWxldHRlRWxlbWVudCxcbiAgICByZW1vdmVDb2xvcixcbiAgICBzZXRQb3NpdGlvblxuICB9KTtcblxuICBjb25zdCBmdWxsUGFsZXR0ZTogSUZ1bGxQYWxldHRlID0gbmV3IEZ1bGxQYWxldHRlKHtcbiAgICBlbGVtZW50OiBmdWxsUGFsZXR0ZUVsZW1lbnQsXG4gICAgY29sb3JDbGlja0hhbmRsZXI6IHRvZ2dsZUNvbG9yXG4gIH0pO1xuXG4gIGNvbnN0IGNvbG9yczogQXJyYXk8c3RyaW5nPiA9IFtdO1xuICBsZXQgY3VycmVudFBvc2l0aW9uID0gMDtcblxuICAvLyBJZiBubyBjbGlja3Mgb24gY29sb3JzID0+IHBvc2l0aW9uIG5vdCBjaGFuZ2VkIG1hbnVhbGx5XG4gIC8vIElmIGFsbCBjb2xvcnMgd2FzIGNsZWFyZWQgJiBwb3MgaXMgMFxuICBsZXQgaXNTZXF1ZW50aWFsID0gdHJ1ZTtcblxuICBmdW5jdGlvbiB0b2dnbGVDb2xvciAoY29sb3I6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnRQb3NDb2xvciA9IGdldEN1cnJlbnRDb2xvcigpO1xuXG4gICAgaWYgKGN1cnJlbnRQb3NDb2xvciA9PT0gY29sb3IpIHtcbiAgICAgIHJlbW92ZUNvbG9yKGN1cnJlbnRQb3NpdGlvbik7XG4gICAgICB0cmF5LnJlbW92ZUNvbG9yRnJvbVRyYXkoY3VycmVudFBvc2l0aW9uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhZGRDb2xvcihjb2xvcik7XG5cbiAgICBzZXROZXh0Q2VsbCgpO1xuXG4gICAgZnVsbFBhbGV0dGUuc2V0Q3VycmVudENvbG9yKGdldEN1cnJlbnRDb2xvcigpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldE5leHRDZWxsICgpOiB2b2lkIHtcbiAgICBpZiAoaXNTZXF1ZW50aWFsKSB7XG4gICAgICBpZiAoY3VycmVudFBvc2l0aW9uIDwgTUFYX0NPTE9SUyAtIDEpIHtcbiAgICAgICAgY3VycmVudFBvc2l0aW9uKys7XG4gICAgICAgIHRyYXkuc2V0Q3VycmVudChjdXJyZW50UG9zaXRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXNTZXF1ZW50aWFsID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0UG9zaXRpb24gKHBvc2l0aW9uOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIHBvc2l0aW9uICE9PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGN1cnJlbnRQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIGZ1bGxQYWxldHRlLnNldEN1cnJlbnRDb2xvcihnZXRDdXJyZW50Q29sb3IoKSk7XG5cbiAgICBjb25zdCBleGlzdGVkQ29sb3JzID0gZ2V0RXhpc3RlZENvbG9ycygpO1xuXG4gICAgaWYgKGV4aXN0ZWRDb2xvcnMubGVuZ3RoID09PSAwICYmIGN1cnJlbnRQb3NpdGlvbiA9PT0gMCkge1xuICAgICAgaXNTZXF1ZW50aWFsID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaXNTZXF1ZW50aWFsID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYWRkQ29sb3IgKGNvbG9yOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBjdXJyZW50Q29sb3JPblBvcyA9IGdldEN1cnJlbnRDb2xvcigpO1xuICAgIGNvbG9yc1tjdXJyZW50UG9zaXRpb25dID0gY29sb3I7XG5cbiAgICBjb25zdCBpc05lZWRVbnNlbGVjdENvbG9yT25Qb3MgPSBjdXJyZW50Q29sb3JPblBvc1xuICAgICAgJiYgY3VycmVudENvbG9yT25Qb3MgIT09IGNvbG9yXG4gICAgICAmJiAhY29sb3JzLmluY2x1ZGVzKGN1cnJlbnRDb2xvck9uUG9zKTtcblxuICAgIGlmIChpc05lZWRVbnNlbGVjdENvbG9yT25Qb3MpIHtcbiAgICAgIC8vIE92ZXJyaWRlIGV4aXN0ZWQgY29sb3IgJiB1bnNlbGVjdCBpdFxuICAgICAgZnVsbFBhbGV0dGUudW5zZWxlY3RDb2xvcihjdXJyZW50Q29sb3JPblBvcyk7XG4gICAgfVxuXG4gICAgdHJheS5hZGRDb2xvclRvVHJheSh7XG4gICAgICBjb2xvcixcbiAgICAgIHBvc2l0aW9uOiBjdXJyZW50UG9zaXRpb25cbiAgICB9KTtcbiAgICBmdWxsUGFsZXR0ZS5zZWxlY3RDb2xvcihjb2xvcik7XG5cbiAgICB0cmF5LnNldFRyYXlPdXRwdXQoZ2V0RXhpc3RlZENvbG9ycygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUNvbG9yIChwb3NpdGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgY29sb3IgPSBjb2xvcnNbcG9zaXRpb25dO1xuICAgIGNvbG9yc1twb3NpdGlvbl0gPSAnJztcblxuICAgIGlmICghY29sb3JzLmluY2x1ZGVzKGNvbG9yKSkge1xuICAgICAgZnVsbFBhbGV0dGUudW5zZWxlY3RDb2xvcihjb2xvcik7XG4gICAgfVxuXG4gICAgY29uc3QgZXhpc3RlZENvbG9ycyA9IGdldEV4aXN0ZWRDb2xvcnMoKTtcbiAgICBpZiAoZXhpc3RlZENvbG9ycy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlzU2VxdWVudGlhbCA9IHRydWU7XG4gICAgfVxuXG4gICAgdHJheS5zZXRUcmF5T3V0cHV0KGV4aXN0ZWRDb2xvcnMpO1xuICAgIGZ1bGxQYWxldHRlLnNldEN1cnJlbnRDb2xvcihnZXRDdXJyZW50Q29sb3IoKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRFeGlzdGVkQ29sb3JzICgpOiBBcnJheTxzdHJpbmc+IHtcbiAgICByZXR1cm4gY29sb3JzLmZpbHRlcihpdGVtID0+IGl0ZW0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q3VycmVudENvbG9yICgpOiBzdHJpbmcge1xuICAgIHJldHVybiBjb2xvcnNbY3VycmVudFBvc2l0aW9uXTtcbiAgfVxufTtcbiIsImltcG9ydCB7IElQYWxldHRlcyB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmVudW0gQ0xBU1NOQU1FIHtcbiAgSVRFTSA9ICd0aW55LXBhbGV0dGUnLFxuICBDVVJSRU5UID0gJ3RpbnktcGFsZXR0ZS0tY3VycmVudCdcbn1cblxuZXhwb3J0IGNvbnN0IGFkZFBhbGV0dGVzQWN0aW9ucyA9ICh7IGVsZW1lbnQgfTogSVBhbGV0dGVzKTogdm9pZCA9PiB7XG4gIGxldCBjdXJyZW50OiBIVE1MRWxlbWVudCA9IG51bGw7XG5cbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgIGNvbnN0IHBhbGV0dGUgPSAoPEhUTUxFbGVtZW50PmV2ZW50LnRhcmdldCkuY2xvc2VzdChgLiR7Q0xBU1NOQU1FLklURU19YCk7XG5cbiAgICBpZiAoIXBhbGV0dGUgfHwgcGFsZXR0ZS5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NOQU1FLkNVUlJFTlQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIGN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU05BTUUuQ1VSUkVOVCk7XG4gICAgfVxuXG4gICAgY3VycmVudCA9IDxIVE1MRWxlbWVudD5wYWxldHRlO1xuICAgIGN1cnJlbnQuY2xhc3NMaXN0LmFkZChDTEFTU05BTUUuQ1VSUkVOVCk7XG4gIH0pO1xufTtcbiIsImltcG9ydCB7IElUYWJzIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuZW51bSBDTEFTU05BTUUge1xuICBJVEVNID0gJ3NlY3Rpb24nLFxuICBDVVJSRU5UID0gJ3NlY3Rpb24tLWN1cnJlbnQnXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhYnMge1xuICBfZWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gIF9pdGVtczogUmVjb3JkPHN0cmluZywgSFRNTEVsZW1lbnQ+O1xuICBfY3VycmVudDogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IgKHsgZWxlbWVudCB9OiBJVGFicykge1xuICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMuX2l0ZW1zID0gdGhpcy5fZ2V0SXRlbXMoKTtcbiAgICB0aGlzLl9jdXJyZW50ID0gbnVsbDtcblxuICAgIHRoaXMuc2V0Q3VycmVudCA9IHRoaXMuc2V0Q3VycmVudC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgX2dldEl0ZW1zICgpOiBSZWNvcmQ8c3RyaW5nLCBIVE1MRWxlbWVudD4ge1xuICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbSh0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke0NMQVNTTkFNRS5JVEVNfVtpZF1gKSk7XG5cbiAgICByZXR1cm4gaXRlbXMucmVkdWNlKChwcmV2OiBSZWNvcmQ8c3RyaW5nLCBIVE1MRWxlbWVudD4sIGl0ZW06IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICBwcmV2W2l0ZW0uaWRdID0gaXRlbTtcblxuICAgICAgcmV0dXJuIHByZXY7XG4gICAgfSwge30pO1xuICB9XG5cbiAgc2V0Q3VycmVudCAoaWQ6IHN0cmluZyk6dm9pZCB7XG4gICAgaWYgKCF0aGlzLl9pdGVtc1tpZF0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fY3VycmVudCkge1xuICAgICAgdGhpcy5fY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTTkFNRS5DVVJSRU5UKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdXJyZW50ID0gdGhpcy5faXRlbXNbaWRdO1xuICAgIHRoaXMuX2N1cnJlbnQuY2xhc3NMaXN0LmFkZChDTEFTU05BTUUuQ1VSUkVOVCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IElUcmF5UGFyYW1zLCBJU2V0Q29sb3IgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuXG5lbnVtIENMQVNTTkFNRVMge1xuICBJVEVNID0gJ3RyYXlfX2NvbG9yJyxcbiAgQ1VSUkVOVCA9ICd0cmF5X19jb2xvci0tY3VycmVudCcsXG4gIEZJTExFRCA9ICd0cmF5X19jb2xvci0tZmlsbGVkJyxcbiAgT1VUUFVUID0gJ3RyYXlfX291dHB1dCdcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHJheSB7XG4gIF9lbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgX2N1cnJlbnRFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgX291dHB1dEVsZW1lbnQ6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIF9pdGVtczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XG4gIF9jb2xvckNsaWNrSGFuZGxlcjogKGNvbG9yOiBzdHJpbmcpID0+IHZvaWQ7XG4gIF9zZXRQb3NpdGlvbjogKHBvc2l0aW9uOiBudW1iZXIpID0+IHZvaWQ7XG4gIF9yZW1vdmVDb2xvcjogKHBvc2l0aW9uOiBudW1iZXIpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IgKHsgZWxlbWVudCwgc2V0UG9zaXRpb24sIHJlbW92ZUNvbG9yIH06IElUcmF5UGFyYW1zKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5fc2V0UG9zaXRpb24gPSBzZXRQb3NpdGlvbjtcbiAgICB0aGlzLl9yZW1vdmVDb2xvciA9IHJlbW92ZUNvbG9yO1xuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLl9pdGVtcyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7Q0xBU1NOQU1FUy5JVEVNfWApO1xuICAgIHRoaXMuX291dHB1dEVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke0NMQVNTTkFNRVMuT1VUUFVUfWApO1xuXG4gICAgdGhpcy5zZXRDdXJyZW50KDApO1xuXG4gICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgY29uc3QgY29sb3JDb250cm9sOiBIVE1MRWxlbWVudCA9ICg8SFRNTEVsZW1lbnQ+ZXZlbnQudGFyZ2V0KS5jbG9zZXN0KGAuJHtDTEFTU05BTUVTLklURU19YCk7XG5cbiAgICAgIGlmICghY29sb3JDb250cm9sIHx8ICFjb2xvckNvbnRyb2wuZGF0YXNldCB8fCAhY29sb3JDb250cm9sLmRhdGFzZXQucG9zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcG9zaXRpb24gPSArY29sb3JDb250cm9sLmRhdGFzZXQucG9zO1xuICAgICAgY29uc3QgY29sb3IgPSBjb2xvckNvbnRyb2wuZGF0YXNldC5jb2xvcjtcblxuICAgICAgaWYgKHRoaXMuX2N1cnJlbnRFbGVtZW50ID09PSBjb2xvckNvbnRyb2wgJiYgY29sb3IpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVDb2xvckZyb21UcmF5KHBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlQ29sb3IocG9zaXRpb24pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2V0Q3VycmVudChwb3NpdGlvbik7XG4gICAgICB0aGlzLl9zZXRQb3NpdGlvbihwb3NpdGlvbik7XG4gICAgfSk7XG4gIH1cblxuICBzZXRDdXJyZW50IChwb3NpdGlvbjogbnVtYmVyKTp2b2lkIHtcbiAgICBpZiAodGhpcy5fY3VycmVudEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NOQU1FUy5DVVJSRU5UKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IHRoaXMuX2l0ZW1zW3Bvc2l0aW9uXTtcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTTkFNRVMuQ1VSUkVOVCk7XG4gIH1cblxuICBhZGRDb2xvclRvVHJheSAoeyBjb2xvciwgcG9zaXRpb24gfTogSVNldENvbG9yKTogdm9pZCB7XG4gICAgY29uc3QgZWxlbWVudCA9IDxIVE1MRWxlbWVudD4gdGhpcy5faXRlbXNbcG9zaXRpb25dO1xuICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZCA9IGNvbG9yO1xuICAgIGVsZW1lbnQuZGF0YXNldC5jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FUy5GSUxMRUQpO1xuICB9XG5cbiAgcmVtb3ZlQ29sb3JGcm9tVHJheSAocG9zaXRpb246IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGVsZW1lbnQgPSA8SFRNTEVsZW1lbnQ+IHRoaXMuX2l0ZW1zW3Bvc2l0aW9uXTtcbiAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmQgPSAndHJhbnNwYXJlbnQnO1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU05BTUVTLkZJTExFRCk7XG4gICAgZWxlbWVudC5kYXRhc2V0LmNvbG9yID0gJyc7XG4gIH1cblxuICBzZXRUcmF5T3V0cHV0IChjb2xvcnM6IEFycmF5PHN0cmluZz4pOiB2b2lkIHtcbiAgICB0aGlzLl9vdXRwdXRFbGVtZW50LnZhbHVlID0gY29sb3JzLmpvaW4oJywgJyk7XG4gIH1cbn1cbiJdfQ=="}
